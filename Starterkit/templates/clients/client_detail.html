{% extends 'partials/base.html' %}
{% load static %}
{% block title %}{{ client.name|title }}{% endblock title %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'libs/toastr/build/toastr.min.css' %}">
{% endblock %}
{% block contents %}


    <div class="row">
        <div class="col-lg-5">
            <div class="card">
                <div class="card-body">
                    <h4>Client Details</h4>
                    <a href="{% url 'clients:client_update' pk=client.id %}" role="button" class="btn btn-outline-primary waves-effect waves-light">
                        <i class="mdi mdi-account-edit"></i>
                    </a>
                    <table class="table table-nowrap mb-0">
                        <tr>
                            <td><b>Name</b></td>
                            <td>{{ client.name|title }}</td>
                        </tr>
                        <tr>
                            <td><b>Address</b></td>
                            <td>{{ client.address }}</td>
                        </tr>
                        <tr>
                            <td><b>Contact Number</b></td>
                            <td>{{ client.contact_number }}</td>
                        </tr>
                        <tr>
                            <td><b>Status</b></td>
                            {% if client.is_active %}
                            <td>Active</td>
                            {% else %}
                            <td>Inactive</td>
                            {% endif %}
                        </tr>
                    </table>    
                </div>
            </div>
        </div>
        <div class="col-lg-7">
            <div class="card">
                <div class="card-body">
                    <h4>Contacts</h4>
                    
                        <a href="{% url 'clients:client_contact_create' pk=client.pk %}" role="button" class="btn btn-outline-primary waves-effect waves-light">Add</a>
                    
                    {% if client.clientcontact_set %}
                    <table class="table table-nowrap mb-0">
                        <tr><th>Name</th><th>Designation</th><th>Contact Number</th><th>Delete</th></tr>
                        {% for contact in client.clientcontact_set.all %}
                        <tr>
                            <td><a href="{{ contact.get_absolute_url }}">{{ contact.name|title }}</a></td>
                            <td>{{ contact.designation }}</td>
                            <td>{{ contact.contact_number }}</td>
                            <td>
                                <a href="{{ contact.get_absolute_url }}" role="button" class="btn btn-outline-primary waves-effect waves-light">
                                    <i class="mdi mdi-book-edit"></i></a>
                                <a href="{{ contact.get_delete_url }}" role="button" 
                                class="btn btn-outline-danger waves-effect waves-light"
                                onclick="return confirm('Do you really want to delete {{ file.get_file_name }}');">
                                    <i class="mdi mdi-delete"></i></a>
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                    {% endif %}
                </div>
            </div>
                    
                </div>

                </div>
                <!-- end card body -->
            </div>
            <!-- end card -->
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    
{% endblock %}
{% block extra_javascript %}

    <!-- toastr plugin -->
    <script src="{% static 'libs/toastr/build/toastr.min.js' %}"></script>

    {% if messages %}
        {% for message in messages %}
        <script> window.addEventListener("load", (event) => {toastr.info(message);});</script>
        {% endfor %}
{% endif %}

{% endblock %}