{% extends 'partials/base.html' %}
{% load static %}
{% block title %}{{ client.name|title }}{% endblock title %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'libs/toastr/build/toastr.min.css' %}">
{% endblock %}
{% block contents %}


    <div class="row">
        <div class="col-lg-5">
            <div class="card">
                <div class="card-body">
                    <h4>Purchase Details</h4>
                    
                    <table class="table table-nowrap mb-0">
                        <tr>
                            <td><b>Date</b></td>
                            <td>{{ purchase.date }}</td>
                        </tr>
                        <tr>
                            <td><b>Description</b></td>
                            <td>{{ purchase.description }}</td>
                        </tr>
                        <tr>
                            <td><b>Supplier</b></td>
                            <td>{{ purchase.supplier }}</td>
                        </tr>
                        <tr>
                            <td><b>Warehouse</b></td>
                            <td>{{ purchase.warehouse }}</td>
                        </tr>
                        <tr>
                            <td><b>Project</b></td>
                            <td>{{ purchase.project }}</td>
                        </tr>
                    </table>    
                </div>
            </div>
        </div>
        <div class="col-lg-7">
            <div class="card">
                <div class="card-body">
                    <h4>Details</h4>
                    
                        
                    {% if purchase.materialqty_set %}
                    <table class="table table-nowrap mb-0">
                        <tr>
                            <th>Material</th><th>Quantity</th>
                        {% if purchase.warehouse %}
                            <th>Low Level</th><th>Current Level</th>
                        {% endif %}
                        </tr>
                        {% for materialqty in purchase.materialqty_set.all %}
                        <tr>
                            <td>{{ materialqty.material }}</td>
                            <td>{{ materialqty.quantity }}</td>
                        {% if purchase.warehouse %}
                            <td>{{ materialqty.material.get_low_level(purchase.warehouse.id) }}</td>
                            <td>{{ materialqty.material.get_level(purchase.warehouse.id) }}</td>
                        {% endif %}
                        </tr>
                        {% endfor %}
                    </table>
                    {% endif %}
                </div>
            </div>
                    
                </div>

                </div>
                <!-- end card body -->
            </div>
            <!-- end card -->
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->

    
{% endblock %}
{% block extra_javascript %}

    <!-- toastr plugin -->
    <script src="{% static 'libs/toastr/build/toastr.min.js' %}"></script>

    {% if messages %}
        {% for message in messages %}
        <script> window.addEventListener("load", (event) => {toastr.info(message);});</script>
        {% endfor %}
{% endif %}

{% endblock %}